$(function(){!1===function(){var e=window.navigator.userAgent,n=e.indexOf("MSIE ");if(n>0)return parseInt(e.substring(n+5,e.indexOf(".",n)),10);if(e.indexOf("Trident/")>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var t=e.indexOf("Edge/");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);return!1}()?$("html").addClass("browser_modern"):$("html").addClass("browser_ie");var e=!1;function n(){var e=$(".lyrics").html();$(".lyrics").html(e.replace(/<br\s*[\/]?>/gi,"<i></i><br/>"))}var i=$(".lyrics_link");function t(){if(!0===e)return!1;$(".lyrics_link").each(function(){var e=$(this).offset().top+$(this).outerHeight();$(window).scrollTop()+$(window).height()/1.5>e&&($(this).hasClass("show")||$(this).addClass("show"))})}var s,o=!1;$(window).on("scroll",function(){o||(o=!0,clearTimeout(s),t(),setTimeout(function(){o=!1},100),s=setTimeout(function(){t()},200))});var a=$("div.contents"),l=a.children("div.contents_btm"),r=$("div.contents_popup"),c=(r.children(".popup_line"),r.children(".popup_info")),d=c.children(".popup_lyrics"),u=$(".popup_arrow"),p=$("a.popup_close"),h=l.offset().top,f=l.height(),m=r.height(),v=null,b=null,_=null;function y(){$("html").removeClass("no_scroll"),r.removeClass("on"),p.removeClass("on"),$(".lyrics_link").removeClass("on"),setTimeout(function(){r.css({visibility:"hidden"}),c.scrollTop(0),b=null},80)}p.on("click",function(e){e.preventDefault(),y()});$(".popup_layer").on("click",function(e){e.preventDefault(),y()}),$(window).on("load",function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&($("html").addClass("mobile"),i.addClass("show"),e=!0),$(".visual_image").animate({opacity:1},1500,function(){$(this).addClass("on"),$(".title_text").addClass("on")}),n(),t(),particlesJS("particles-js",{particles:{number:{value:120,density:{enable:!0,value_area:2500}},color:{value:"#ffffff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.6,random:!0,anim:{enable:!0,speed:.6,opacity_min:.21,sync:!1}},size:{value:1.3,random:!0,anim:{enable:!0,speed:3,size_min:21.08,sync:!0}},line_linked:{enable:!1,distance:150,color:"#ffffff",opacity:.4,width:1},move:{enable:!0,speed:.8,direction:"none",random:!0,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!0,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!1,mode:"bubble"},onclick:{enable:!1,mode:"push"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:36.54,size:1.6,duration:3.16,opacity:.9,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0}),$(".contents").height(),$(document).on("click",".lyrics_link",function(n){n.preventDefault(),$(window).height();var i=$(window).scrollTop();$(document).height(),i-h;var t=$(this).position().top;if(v=$(".lyrics_link").index($(this)),$(this).addClass("on"),_=$(this).html(),d.empty().append(_),b===v)return!1;if(r.css({visibility:"visible"}),!0===e)r.css({top:0}),$("html").addClass("no_scroll"),r.hasClass("on")?(y(),setTimeout(function(){r.addClass("on"),p.addClass("on")},300)):(r.addClass("on"),p.addClass("on"));else{u.css({top:t}),r.css({top:t});var s=m-(f-t);s<0&&(s=0),a.css({"padding-bottom":s}),r.hasClass("on"),y(),setTimeout(function(){r.addClass("on")},300),$(".lyrics_link").eq(v).addClass("on")}b=v})}),$(".track_item").eq(0).click(function(e){e.preventDefault(),$.ajax({url:"track1_lyrics.html",success:function(e){$(".lyrics").html(e),$(".song_title").text("테스트입니당"),$(".track_item").eq(0).addClass("on").siblings().removeClass("on"),n()}})}),$.getJSON("test.json",function(e){var n=[];$.each(e,function(e,i){n.push(i)}),$(document).on("click",".lyrics_link",function(e){e.preventDefault();var i=$(this).data("test");$(".popup_desc").empty().append(n[i])})})});